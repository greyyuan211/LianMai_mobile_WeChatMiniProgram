(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/supple-mentary"],{"29af":function(e,t,i){"use strict";var n=i("3d76"),s=i.n(n);s.a},"3d76":function(e,t,i){},"73f1":function(e,t,i){"use strict";(function(e){i("8d7e");n(i("66fd"));var t=n(i("e75b"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("543d")["createPage"])},"8ee8":function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return n}));var n={quiPage:function(){return Promise.all([i.e("common/vendor"),i.e("components/qui-page/qui-page")]).then(i.bind(null,"a983"))},quiUploadFile:function(){return i.e("components/qui-upload-file/qui-upload-file").then(i.bind(null,"9494"))},quiIcon:function(){return i.e("components/qui-icon/qui-icon").then(i.bind(null,"d13f"))},quiUploader:function(){return Promise.all([i.e("common/vendor"),i.e("components/qui-uploader/qui-uploader")]).then(i.bind(null,"bb64"))},uniPopup:function(){return i.e("components/uni-popup/uni-popup").then(i.bind(null,"78fd"))},quiToast:function(){return i.e("components/qui-toast/qui-toast").then(i.bind(null,"b091"))}},s=function(){var e=this,t=e.$createElement,i=(e._self._c,e.__map(e.dataList,(function(t,i){var n=e.__get_orig(t),s=1===t.status&&1===t.status&&3===t.type?e.i18n.t("user.checkbox"):null,a=1===t.status&&5===t.type?e.i18n.t("profile.uploadFile"):null,d=1===t.status&&0===t.type?e.i18n.t("user.pleaseEnterTheContent"):null,u=1===t.status&&1===t.type?e.i18n.t("user.pleaseEnterTheContent"):null;return{$orig:n,g0:s,g1:a,g2:d,g3:u}}))),n=e.i18n.t("user.register");e.$mp.data=Object.assign({},{$root:{l0:i,g4:n}})},a=[]},e1c4:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=d(i("dc1b")),s=i("0f20"),a=d(i("7a36"));function d(e){return e&&e.__esModule?e:{default:e}}var u=function(){i.e("components/uni-popup/uni-popup-dialog").then(function(){return resolve(i("ba2b"))}.bind(null,i)).catch(i.oe)},l={components:{uniPopupDialog:u},mixins:[n.default,a.default],data:function(){return{dataList:[],url:s.DISCUZ_REQUEST_HOST,formData:{type:1},filePreview:[],uploadStatus:!0,deleteType:"",deleteTip:"",deleteId:"",deleteIndex:"",extendIndex:"",loginStatus:0,header:{}}},computed:{userId:function(){return this.$store.getters["session/get"]("userId")}},mounted:function(){var t=e.getStorageSync("access_token");this.header={authorization:"Bearer ".concat(t)},this.getData()},methods:{radioChange:function(e){var t=e.target.value.split("-"),i=this.dataList[Number(t[1])];i.fields_detail=i.fields_options,i.fields_detail.options.forEach((function(e,n){e.value===t[0]?i.fields_detail.options[n].checked=!0:i.fields_detail.options[n].checked=!1}))},checkboxChange:function(e){var t=e.target.value,i=Number(t[0].split("-")[1]),n=t.map((function(e){return e.split("-")[0]})),s=this.dataList[i];s.fields_detail=s.fields_options,s.fields_detail.options.forEach((function(e,t){-1!==n.indexOf(e.value)?s.fields_detail.options[t].checked=!0:s.fields_detail.options[t].checked=!1}))},uploadClick:function(e){this.uploadStatus=e},uploadChange:function(e,t,i){this.uploadStatus=t,this.dataList[i].fields_detail=e},uploadClear:function(e,t,i){this.deleteType=0,this.deleteId=e.id,this.deleteIndex=t,this.extendIndex=i,this.$refs.deletePopup.open(),this.deleteTip=this.i18n.t("core.deleteImgSure")},handleDeleteCancel:function(){this.$refs.deletePopup.close()},handleDeleteOk:function(){var e=this;if(this.$refs.deletePopup.close(),0===this.deleteType){var t=this.dataList[this.extendIndex].fields_detail;t.forEach((function(i,n){e.deleteId===i.id&&t.splice(n,1)})),this.$refs["upload-".concat(this.extendIndex)][0].clear(this.deleteIndex)}else{var i=this.dataList[this.extendIndex].fields_detail;i.forEach((function(t,n){e.deleteId===t.id&&(i.splice(n,1),e.$refs.uploadFiles.deleteItem(t.id))}))}},uploadFileBtn:function(e){this.$refs.uploadFiles.uploadBtn(),this.$refs.uploadFiles.setIndex(e)},fileChange:function(e){var t=this,i=e;this.dataList.forEach((function(e,i){5===e.type&&(t.dataList[i].fields_detail=[])})),i.forEach((function(e){t.dataList[e.index].fields_detail.push({id:e.id,name:e.attributes.fileName,url:e.attributes.url,format:e.attributes.fileName.substring(e.attributes.fileName.lastIndexOf(".")+1).toUpperCase()})}))},deleteFile:function(e,t){this.deleteType=1,this.deleteId=e,this.extendIndex=t,this.$refs.deletePopup.open(),this.deleteTip=this.i18n.t("core.deleteEnclosureSure")},setToolTips:function(e){this.$refs.toast.show({message:e})},getData:function(){var e=this,t={user_id:this.userId};this.$store.dispatch("jv/get",["user/signinfields",{params:t}]).then((function(t){var i=t;i.forEach((function(e){var t=e;2!==e.type&&3!==e.type||(t.fields_options=JSON.parse(e.fields_ext)),e.type>1?t.fields_detail=[]:t.fields_detail=""})),e.dataList=i}))},submitData:function(){var t=this,i={data:[]};this.dataList.forEach((function(e){var n=e;if(0===e.type||1===e.type)n.fields_ext=e.fields_detail;else if(2===e.type||3===e.type)n.fields_ext=JSON.stringify(e.fields_detail);else if(4===e.type)if(e.fields_detail.length>0){var s=[];e.fields_detail.forEach((function(e){s.push({id:e.id,name:e.attributes.fileName,url:e.attributes.url})})),n.fields_ext=JSON.stringify(s)}else n.fields_ext="";else n.fields_ext=e.fields_detail.length>0?JSON.stringify(e.fields_detail):"";i.data.push({type:"user_sign_in",attributes:{name:e.name,id:e.id,user_id:t.userId,type:e.type,sort:e.sort,fields_desc:e.fields_desc,required:e.required,fields_ext:e.fields_ext,status:e.status}})})),this.$store.dispatch("jv/post",[{_jv:{type:"user/signinfields"}},{data:i}]).then((function(){t.logind(),e.redirectTo({url:"/pages/home/index"})}))},handleRegister:function(){for(var e=[],t=/^\s*$/g,i=0;i<this.dataList.length;i+=1){if(1===this.dataList[i].required&&(t.test(this.dataList[i].fields_detail)||this.dataList[i].fields_detail.length<1))return this.$refs.toast.show({message:"".concat(this.dataList[i].name,"不能为空")}),void e.push(0);e.push(1)}-1===e.indexOf(0)&&this.submitData()}}};t.default=l}).call(this,i("543d")["default"])},e75b:function(e,t,i){"use strict";i.r(t);var n=i("8ee8"),s=i("fe3b");for(var a in s)"default"!==a&&function(e){i.d(t,e,(function(){return s[e]}))}(a);i("29af");var d,u=i("f0c5"),l=Object(u["a"])(s["default"],n["b"],n["c"],!1,null,"3ec7c682",null,!1,n["a"],d);t["default"]=l.exports},fe3b:function(e,t,i){"use strict";i.r(t);var n=i("e1c4"),s=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=s.a}},[["73f1","common/runtime","common/vendor"]]]);