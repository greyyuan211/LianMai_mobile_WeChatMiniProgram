(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/notice/notice"],{2273:function(t,e,n){"use strict";var i=n("9269"),o=n.n(i);o.a},"4eed":function(t,e,n){"use strict";(function(t){n("8d7e");i(n("66fd"));var e=i(n("7ddf"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"5dfa":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("6c07");function o(t){return u(t)||c(t)||r(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t,e){if(t){if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function c(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function u(t){if(Array.isArray(t))return s(t)}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var d=function(){n.e("components/uni-popup/uni-popup-dialog").then(function(){return resolve(n("ba2b"))}.bind(null,n)).catch(n.oe)},l={components:{uniPopupDialog:d},data:function(){return{navTitle:"",loadingType:"more",pageSize:20,pageNum:1,noticeList:[],type:"",noticeId:0,emojiList:[]}},onLoad:function(e){var n=e.title,i=e.type,o=e.unReadNum,a="";"rewarded,withdrawal"===i?(this.type=i,a="".concat(i,",threadrewarded,receiveredpacket,threadrewardedexpired")):(this.type=i,a=i),this.navTitle=n,parseInt(o,10)>0&&(this.navTitle=this.i18n.t("notice.item",{title:n,unReadNum:o})),t.setNavigationBarTitle({title:this.navTitle}),this.getNotices(a)},methods:{getContentEmoji:function(){var t=this;this.$store.dispatch("jv/get",["emoji",{}]).then((function(e){t.emojiList=e,t.noticeList.forEach((function(e){var n=e;t.emojiList.forEach((function(t){n.content.includes(t.code)&&(n.content=n.content.replace(t.code,'<img style="display:inline-block;vertical-align:top;" src="'.concat(t.url,'" class="qq-emotion"/>')))}))}))}))},getNotices:function(e){var n=this,a={"page[number]":this.pageNum,"page[limit]":this.pageSize,"filter[type]":e};this.$store.commit("jv/clearRecords",{_jv:{type:"notification"}}),this.$store.dispatch("jv/get",["notification",{params:a}]).then((function(a){if(a&&a._jv){delete a._jv;for(var r=0;r<a.length;r+=1)a[r].username=a[r].user_name,a[r].avatarUrl=a[r].user_avatar,a[r].created_at&&(a[r].time=(0,i.time2DateAndHM)(a[r].created_at)),a[r].thread_created_at&&(a[r].thread_time=(0,i.time2DateAndHM)(a[r].thread_created_at)),a[r].reply_post_created_at&&(a[r].reply_time=(0,i.time2DateAndHM)(a[r].reply_post_created_at)),"rewarded"===a[r].type&&a[r].amount&&(a[r].money="￥".concat(a[r].amount)),"withdrawal"===a[r].type&&a[r].cash_actual_amount&&(a[r].money="-￥".concat(a[r].cash_actual_amount));n.noticeList=[].concat(o(n.noticeList),o(a)),"system"===e&&n.getContentEmoji(),n.loadingType=a.length===n.pageSize?"more":"nomore",t.$emit("notiRead")}}))},pullDown:function(){"more"===this.loadingType&&(this.pageNum+=1,this.getNotices(this.type))},deleteNotice:function(t){this.noticeId=t,this.$refs.popTips.open()},handleCancel:function(){this.$refs.popTips.close()},handleOk:function(){var e=this;this.$refs.popTips.close(),this.$store.dispatch("jv/delete","notification/".concat(this.noticeId)).then((function(n){n&&(e.pageNum=1,e.noticeList=[],e.getNotices(e.type),t.showToast({title:"删除成功",duration:2e3}))}))}}};e.default=l}).call(this,n("543d")["default"])},"7ddf":function(t,e,n){"use strict";n.r(e);var i=n("ff34"),o=n("aa8c");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("2273");var r,c=n("f0c5"),u=Object(c["a"])(o["default"],i["b"],i["c"],!1,null,"e77fa2b4",null,!1,i["a"],r);e["default"]=u.exports},9269:function(t,e,n){},aa8c:function(t,e,n){"use strict";n.r(e);var i=n("5dfa"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},ff34:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={quiPage:function(){return Promise.all([n.e("common/vendor"),n.e("components/qui-page/qui-page")]).then(n.bind(null,"a983"))},quiNotification:function(){return n.e("components/qui-notification/qui-notification").then(n.bind(null,"be54"))},quiLoadMore:function(){return n.e("components/qui-load-more/qui-load-more").then(n.bind(null,"3fc9"))},uniPopup:function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"78fd"))}},o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.i18n.t("core.deleteNewsSure"));t.$mp.data=Object.assign({},{$root:{g0:n}})},a=[]}},[["4eed","common/runtime","common/vendor"]]]);