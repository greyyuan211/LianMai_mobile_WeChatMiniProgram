(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/wechat"],{"19e1":function(e,t,r){"use strict";r.r(t);var o=r("9ded"),n=r.n(o);for(var i in o)"default"!==i&&function(e){r.d(t,e,(function(){return o[e]}))}(i);t["default"]=n.a},"4b08":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return o}));var o={quiPage:function(){return Promise.all([r.e("common/vendor"),r.e("components/qui-page/qui-page")]).then(r.bind(null,"a983"))}},n=function(){var e=this,t=e.$createElement;e._self._c},i=[]},"8ad3":function(e,t,r){"use strict";(function(e){r("8d7e");o(r("66fd"));var t=o(r("e6207"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("543d")["createPage"])},"9ded":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=u(r("dc1b")),n=u(r("7a36")),i=u(r("57a8")),a=u(r("c939")),s=r("0f20");function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){return m(e)||g(e,t)||f(e,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){if(e){if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function g(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],o=!0,n=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done);o=!0)if(r.push(a.value),t&&r.length===t)break}catch(u){n=!0,i=u}finally{try{o||null==s["return"]||s["return"]()}finally{if(n)throw i}}return r}}function m(e){if(Array.isArray(e))return e}var _={mixins:[o.default,n.default,i.default,a.default],data:function(){return{state:!0}},onLoad:function(e){},methods:{wxLogin:function(t){var r=this;!this.$store.getters["session/get"]("isLogin")&&this.forums&&this.forums.set_reg&&2===this.forums.set_reg.register_type&&(e.setStorageSync("isSend",!0),e.setStorageSync("register",1)),this.$store.dispatch("session/noSenseh5Login",t).then((function(t){if(r.forums&&r.forums.set_site&&"1"===r.forums.set_site.open_ext_fields&&t&&t.new_user)r.jump2RegisterExtendPage();else if(t&&t.data&&t.data.data&&t.data.data.id){if(r.logind(),r.forums&&r.forums.set_site&&r.forums.set_site.site_mode!==s.SITE_PAY){e.getStorage({key:"page",success:function(t){e.redirectTo({url:t.data})},fail:function(){e.redirectTo({url:"/pages/home/index"})}});var o=e.getStorageSync("isBind");o?e.showToast({title:"绑定成功",duration:2e3}):e.showToast({title:"登录成功",duration:2e3})}else if(r.forums&&r.forums.set_site&&r.forums.set_site.site_mode===s.SITE_PAY&&r.user){var n=e.getStorageSync("isBind"),i=r,a=function(){i.user.paid?e.getStorage({key:"page",success:function(t){"/site/info"!==t||n?e.redirectTo({url:t.data}):e.redirectTo({url:"/pages/home/index"})},fail:function(){e.redirectTo({url:"/pages/home/index"})}}):e.redirectTo({url:"/pages/site/info"})};e.showToast({title:n?"绑定成功":"登录成功",icon:"success",duration:2e3,complete:function(){a()}})}}else{if(t&&t.data&&t.data.errors){var u=d(t.data.errors,1),c=u[0];if("no_bind_user"===t.data.errors[0].code){var f={headimgurl:t.data.errors[0].user.headimgurl,username:t.data.errors[0].user.nickname};return e.setStorageSync("token",t.data.errors[0].token),e.setStorageSync("userInfo",f),e.setStorageSync("isBind",!0),r.forums&&r.forums.set_reg&&0===r.forums.set_reg.register_type&&r.jump2RegisterBindPage(),void(r.forums&&r.forums.set_reg&&1===r.forums.set_reg.register_type&&r.jump2RegisterBindPhonePage())}if("permission_denied"===t.data.errors[0].code)return void r.login();if("register_validate"===t.data.errors[0].code)return e.showToast({icon:"none",title:r.i18n.t("core.register_validate"),duration:2e3}),r.$store.commit("session/SET_AUDIT_INFO",{errorCode:"register_validate",username:c.data.userName}),void e.redirectTo({url:"/pages/user/warning"});if("validate_reject"===t.data.errors[0].code)return e.showToast({icon:"none",title:r.i18n.t("core.validate_reject"),duration:2e3}),r.$store.commit("session/SET_AUDIT_INFO",{errorCode:"validate_reject",reason:c.data.rejectReason,username:c.data.userName}),void e.redirectTo({url:"/pages/user/warning"});if("register_close"===t.data.errors[0].code)return e.showToast({icon:"none",title:r.i18n.t("core.register_close"),duration:2e3}),void e.redirectTo({url:"/pages/site/info"});if("ban_user"===t.data.errors[0].code)return e.showToast({icon:"none",title:r.i18n.t("core.ban_user"),duration:2e3}),void r.$store.dispatch("forum/setError",{loading:!1,code:"ban_user"});if("account_has_been_bound"===t.data.errors[0].code)return void e.getStorage({key:"page",success:function(t){e.redirectTo({url:t.data}),setTimeout((function(){e.showToast({icon:"none",title:"用户或微信已绑定其它，无法进行绑定",duration:2e3})}),1e3)}});if("rebind_mp_wechat"===t.data.errors[0].code)return e.setStorageSync("token",t.data.errors[0].token),void e.redirectTo({url:"/pages/user/login-bind"})}e.redirectTo({url:"/"}),setTimeout((function(){e.showToast({icon:"none",title:"未知错误".concat(t.data.errors[0].code),duration:2e3})}),500)}})).catch((function(t){e.redirectTo({url:"/"}),setTimeout((function(){e.showToast({icon:"none",title:t.message,duration:2e3})}),500)}))}}};t.default=_}).call(this,r("543d")["default"])},e6207:function(e,t,r){"use strict";r.r(t);var o=r("4b08"),n=r("19e1");for(var i in n)"default"!==i&&function(e){r.d(t,e,(function(){return n[e]}))}(i);var a,s=r("f0c5"),u=Object(s["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);t["default"]=u.exports}},[["8ad3","common/runtime","common/vendor"]]]);