(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/at-member"],{"051d":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("2f62");function a(e){return c(e)||l(e)||i(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function l(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function c(e){if(Array.isArray(e))return s(e)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g={name:"QuiAtMemberPage",data:function(){return{allSiteUser:[],allFollow:[],followStatus:!0,checkAvatar:[],loadingText:"discuzq.list.loading",searchValue:"",pageNum:1,meta:{},select:!0,current:0,categoryId:0,categoryIndex:0}},methods:f(f({},(0,r.mapMutations)({setAtMember:"atMember/SET_ATMEMBER"})),{},{handleGroups:function(e){var t=[];return e.groups&&e.groups.length>0&&(t=e.groups.filter((function(e){return e.isDisplay}))),t.length>0?t[0].name:""},changeCheck:function(e){var t=this;this.checkAvatar=[],e.detail.value.forEach((function(e){t.followStatus?t.checkAvatar.push(JSON.parse(e).toUser):t.checkAvatar.push(JSON.parse(e))}))},radioChange:function(t){e.navigateTo({url:"/topic/post?type=5&categoryId=".concat(this.categoryId,"&categoryIndex=").concat(this.categoryIndex)}),setTimeout((function(){t.toUser?e.$emit("radioChange",t.toUser):e.$emit("radioChange",t)}),1e3)},getCheckMember:function(){this.setAtMember(this.checkAvatar),e.navigateBack({delta:1})},searchInput:function(e){var t=this;this.followStatus=!1,this.searchValue=e.detail.value,this.checkAvatar=[],1!==this.pageNum&&(this.pageNum=1),this.loadingText="discuzq.list.loading",this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.allSiteUser=[],t.getSiteMember(1)}),250)},lower:function(){this.followStatus?this.meta.total>this.allFollow.length?(this.pageNum+=1,this.getFollowMember(this.pageNum)):this.loadingText="discuzq.list.noMoreData":this.meta.total>this.allSiteUser.length?(this.pageNum+=1,this.getSiteMember(this.pageNum)):this.loadingText="discuzq.list.noMoreData"},getFollowMember:function(e){var t=this,n={include:["toUser","toUser.groups"],"page[size]":20,"page[number]":e};"select"===this.select&&(n["filter[canBeAsked]"]="yes"),this.$store.dispatch("jv/get",["follow",{params:n}]).then((function(e){t.meta=e._jv.json.meta,t.allFollow=[].concat(a(t.allFollow),a(e)),Object.keys(e).nv_length-1===0?t.loadingText="search.noFollowers":e._jv.json.meta.total<=20&&Object.keys(e).nv_length-1!==0&&(t.loadingText="discuzq.list.noMoreData")}))},getSiteMember:function(e){var t=this,n={"filter[username]":"*".concat(this.searchValue,"*"),"filter[status]":"normal","page[size]":20,"page[number]":e};"select"===this.select&&(n["filter[canBeAsked]"]="yes"),this.$store.dispatch("jv/get",["users",{params:n}]).then((function(e){t.meta=e._jv.json.meta,t.allSiteUser=[].concat(a(t.allSiteUser),a(e)),Object.keys(e).nv_length-1===0?t.loadingText="search.norelatedusersfound":e._jv.json.meta.total<=20&&Object.keys(e).nv_length-1!==0&&(t.loadingText="discuzq.list.noMoreData")}))}}),onLoad:function(t){this.select=t.name,this.categoryId=t.categoryId,this.categoryIndex=t.categoryIndex,"select"===t.name?(this.followStatus=!1,e.setNavigationBarTitle({title:this.i18n.t("discuzq.atMember.selectUser")})):e.setNavigationBarTitle({title:this.i18n.t("discuzq.atMember.atTitle")}),"select"!==t.name?this.getFollowMember(1):"select"===t.name&&this.getSiteMember(1),this.setAtMember([])}};t.default=g}).call(this,n("543d")["default"])},4052:function(e,t,n){"use strict";var r=n("4589"),a=n.n(r);a.a},4589:function(e,t,n){},"661b":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r}));var r={quiPage:function(){return Promise.all([n.e("common/vendor"),n.e("components/qui-page/qui-page")]).then(n.bind(null,"a983"))},quiIcon:function(){return n.e("components/qui-icon/qui-icon").then(n.bind(null,"d13f"))},quiAvatarCell:function(){return n.e("components/qui-avatar-cell/qui-avatar-cell").then(n.bind(null,"a45f"))},quiButton:function(){return n.e("components/qui-button/qui-button").then(n.bind(null,"018a"))}},a=function(){var e=this,t=e.$createElement,n=(e._self._c,"select"===e.select?e.i18n.t("discuzq.atMember.selectUser"):null),r="select"!==e.select?e.i18n.t("discuzq.atMember.selectedMember"):null,a=e.followStatus&&"select"!==e.select?e.__map(e.allFollow,(function(t,n){var r=e.__get_orig(t),a=t.toUser?JSON.stringify(t):null;return{$orig:r,g2:a}})):null,o=e.followStatus||"select"===e.select?null:e.__map(e.allSiteUser,(function(t,n){var r=e.__get_orig(t),a=JSON.stringify(t);return{$orig:r,g3:a}})),i=e.i18n.t(e.loadingText),l="select"!==e.select&&"select"!==e.select?Boolean(e.checkAvatar.length<1):null,c="select"!==e.select&&"select"!==e.select?Boolean(e.checkAvatar.length<1):null,s="select"!==e.select&&"select"!==e.select&&e.checkAvatar.length<1?e.i18n.t("discuzq.atMember.notSelected"):null,u="select"===e.select||"select"===e.select||e.checkAvatar.length<1?null:e.i18n.t("discuzq.atMember.selected");e.$mp.data=Object.assign({},{$root:{g0:n,g1:r,l0:a,l1:o,g4:i,m0:l,m1:c,g5:s,g6:u}})},o=[]},a062:function(e,t,n){"use strict";n.r(t);var r=n("051d"),a=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t["default"]=a.a},c07b:function(e,t,n){"use strict";n.r(t);var r=n("661b"),a=n("a062");for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("4052");var i,l=n("f0c5"),c=Object(l["a"])(a["default"],r["b"],r["c"],!1,null,"3ea29cd1",null,!1,r["a"],i);t["default"]=c.exports},ced0:function(e,t,n){"use strict";(function(e){n("8d7e");r(n("66fd"));var t=r(n("c07b"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])}},[["ced0","common/runtime","common/vendor"]]]);