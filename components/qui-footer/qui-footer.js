(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/qui-footer/qui-footer"],{1944:function(e,t,o){"use strict";o.d(t,"b",(function(){return a})),o.d(t,"c",(function(){return r})),o.d(t,"a",(function(){return n}));var n={quiIcon:function(){return o.e("components/qui-icon/qui-icon").then(o.bind(null,"d13f"))},uniPopup:function(){return o.e("components/uni-popup/uni-popup").then(o.bind(null,"78fd"))},quiToast:function(){return o.e("components/qui-toast/qui-toast").then(o.bind(null,"b091"))},quiAuthPhone:function(){return Promise.all([o.e("common/vendor"),o.e("components/qui-auth-phone/qui-auth-phone")]).then(o.bind(null,"26a7"))},quiUploader:function(){return Promise.all([o.e("common/vendor"),o.e("components/qui-uploader/qui-uploader")]).then(o.bind(null,"bb64"))},quiUploadVideo:function(){return Promise.all([o.e("common/vendor"),o.e("components/qui-upload-video/qui-upload-video")]).then(o.bind(null,"7933"))}},a=function(){var e=this,t=e.$createElement,o=(e._self._c,e.i18n.t("home.cancel"));e.$mp.data=Object.assign({},{$root:{g0:o}})},r=[]},"33cb":function(e,t,o){"use strict";o.r(t);var n=o("d2ba"),a=o.n(n);for(var r in n)"default"!==r&&function(e){o.d(t,e,(function(){return n[e]}))}(r);t["default"]=a.a},"533e":function(e,t,o){"use strict";o.r(t);var n=o("1944"),a=o("33cb");for(var r in a)"default"!==r&&function(e){o.d(t,e,(function(){return a[e]}))}(r);o("8802");var i,s=o("f0c5"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],i);t["default"]=c.exports},8802:function(e,t,o){"use strict";var n=o("906e"),a=o.n(n);a.a},"906e":function(e,t,o){},d2ba:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=u(o("a34a")),a=u(o("7a36")),r=u(o("dc1b")),i=o("2f62"),s=u(o("c939")),c=o("0f20");function u(e){return e&&e.__esModule?e:{default:e}}function p(e,t,o,n,a,r,i){try{var s=e[r](i),c=s.value}catch(u){return void o(u)}s.done?t(c):Promise.resolve(c).then(n,a)}function d(e){return function(){var t=this,o=arguments;return new Promise((function(n,a){var r=e.apply(t,o);function i(e){p(r,n,a,i,s,"next",e)}function s(e){p(r,n,a,i,s,"throw",e)}i(void 0)}))}}function f(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach((function(t){h(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function h(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var m=function(){o.e("components/uni-popup/uni-popup-dialog").then(function(){return resolve(o("ba2b"))}.bind(null,o)).catch(o.oe)},g=function(){o.e("components/uni-popup/uni-popup-QandA").then(function(){return resolve(o("237c"))}.bind(null,o)).catch(o.oe)},b={components:{uniPopupDialog:m,UniPopupQandA:g},mixins:[a.default,r.default,s.default],props:{bottom:{type:Number,default:0}},data:function(){return{sel:1,type:"",tabs:[{tabsName:"home.tabsCircle",tabsIcon:"icon-home",id:1,url:"/pages/home/index"},{tabsName:"home.find",tabsIcon:"icon-faxian",id:2,url:"/pages/find/index"},{tabsName:"home.tabsNews",tabsIcon:"icon-message",id:3,url:"/pages/notice/index"},{tabsName:"home.tabsMy",tabsIcon:"icon-mine",id:4,url:"/pages/my/index"}],bottomData:[],bottomDataLength:0,isTabBar:[0],sureType:"",sureTip:"",url:"",formData:{},uploadStatus:!0,isWeixin:"",isiOS:"",uploadImgMax:9}},computed:l(l({},(0,i.mapState)({getCategoryId:function(e){return e.session.categoryId},getCategoryIndex:function(e){return e.session.categoryIndex},footerIndex:function(e){return e.footerTab.footerIndex?parseInt(e.footerTab.footerIndex,10):0},categories:function(e){return e.categories.categories}})),{},{redCircle:function(){return this.user.unreadNotifications}}),created:function(){var t=this,o=getCurrentPages().length;if(o>0){var n=getCurrentPages()[o-1].is,a=n&&n.split("pages/")[1];a&&(this.tabs=this.tabs.map((function(e){var o=t.i18n.t(e.tabsName);e.url&&e.url.includes(a)&&(t.sel=e.id);var n=l(l({},e),{},{tabsName:o});return n})))}this.url=c.DISCUZ_REQUEST_HOST,this.formData={type:1};var r=[],i=0,s=1;e.$off("uploadLength"),e.$on("uploadLength",(function(e){s=e})),e.$off("uploadFail"),e.$on("uploadFail",(function(){i+=1}));var u=0;e.$off("uploadOver"),e.$on("uploadOver",(function(o){var n;e.showLoading({title:t.i18n.t("core.loading"),mask:!0}),n=0===t.footerIndex?"/topic/post?type=3&categoryId=".concat(t.getCategoryId,"&categoryIndex=").concat(t.getCategoryIndex):"/topic/post?type=3",r.push(o.data),r.map((function(e,o){return e.data.attributes.order>t.uploadImgMax&&r.splice(o,1),r})),u=o.times,u+i>=s&&e.navigateTo({url:n,success:function(e){e.eventChannel.emit("acceptDataFromOpenerPage",r.sort(t.compare("order"))),i=0,s=1,r=[]}})}))},destroyed:function(){e.$off("uploadOver"),e.$off("uploadLength"),e.$off("uploadFail"),e.$off("uploadVideoOver")},methods:l(l({select:function(e,t){this.$store.getters["session/get"]("isLogin")&&this.setFooterIndex(parseInt(t,10)),this.$emit("click",e,t,this.isTabBar),this.sel=e.id}},(0,i.mapMutations)({setFooterIndex:"footerTab/SET_FOOTERINDEX"})),{},{footerOpen:function(){var t=this;return d(n.default.mark((function o(){var a,r;return n.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(t.$store.getters["session/get"]("isLogin")||(e.setStorage({key:"page",data:"/pages/home/index"}),t.mpLoginMode()),!t.forums.other.publish_need_real_name){o.next=6;break}return t.sureTip=t.i18n.t("home.needRealname"),t.$refs.surePopup.open(),t.sureType="0",o.abrupt("return");case 6:if(!t.forums.other.publish_need_bind_phone){o.next=11;break}return t.sureTip=t.i18n.t("home.needPhone"),t.$refs.surePopup.open(),t.sureType="1",o.abrupt("return");case 11:if(t.forums.other.can_create_thread_in_category){o.next=14;break}return t.$refs.toast.show({message:t.i18n.t("home.noPostingPermission")}),o.abrupt("return");case 14:if(t.getCategoryId&&(-1===t.getCategoryId?(a=t.categories.find((function(e){return-1===e.pid}))||{},a.canCreateThread||-1===t.getCategoryId||t.$refs.toast.show({message:t.i18n.t("home.noPostingPermission")})):(r=t.categories.find((function(e){return e.pid===Number("".concat(t.getCategoryId))}))||{},r.canCreateThread||-1===t.getCategoryId||t.$refs.toast.show({message:t.i18n.t("home.noPostingPermission")}))),t.forums.other.can_create_thread||t.forums.other.can_create_thread_long||t.forums.other.can_create_thread_video||t.forums.other.can_create_thread_image||t.forums.other.can_create_thread_question||t.forums.other.can_create_thread_audio||t.forums.other.can_create_thread_goods){o.next=18;break}return t.$refs.toast.show({message:t.i18n.t("home.noPostingPermission")}),o.abrupt("return");case 18:t.bottomData=[],t.forums.other.can_create_thread&&t.bottomData.push({text:t.i18n.t("home.word"),icon:"icon-word",name:"text",type:0}),t.forums.other.can_create_thread_long&&t.bottomData.push({text:t.i18n.t("home.invitation"),icon:"icon-post",name:"post",type:1}),t.forums.other.can_create_thread_image&&t.bottomData.push({text:t.i18n.t("home.picture"),icon:"icon-img",name:"image",type:3}),t.forums.other.can_create_thread_audio&&t.bottomData.push({text:t.i18n.t("home.audio"),icon:"icon-record",name:"audio",type:4}),t.forums.other.can_create_thread_video&&t.bottomData.push({text:t.i18n.t("home.video"),icon:"icon-video",name:"video",type:2}),t.forums.other.can_create_thread_question&&t.bottomData.push({text:t.i18n.t("home.questions"),icon:"icon-question",name:"questions",type:5}),t.bottomDataLength=t.bottomData.length,t.$refs.popup.open();case 27:case"end":return o.stop()}}),o)})))()},jumpToQandA:function(t){var o=this;return d(n.default.mark((function a(){return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:1===t&&e.navigateTo({url:"/pagesplay_web/reward-to-ask?type=5&name=select&categoryId=".concat(o.getCategoryId,"&categoryIndex=").concat(o.getCategoryIndex)}),2===t&&e.navigateTo({url:"/pages/user/at-member?name=select&categoryId=".concat(o.getCategoryId,"&categoryIndex=").concat(o.getCategoryIndex)}),o.closeHomemAsk();case 3:case"end":return n.stop()}}),a)})))()},compare:function(e){return function(t,o){var n=t.data.attributes[e],a=o.data.attributes[e];return n>a?1:n<a?-1:0}},closeHomemAsk:function(){var e=this;this.bottomData.forEach((function(t,o){var n=JSON.parse(JSON.stringify(t));n.selected=!1,e.bottomData.splice(o,1,n)})),this.$refs.clickOpenQandA.close(),this.$refs.popup.close()},handleClick:function(t){var o,n=this;if(6===t.type)return e.navigateTo({url:"/pages/topic/parse-goods?type=".concat(t.type)}),void this.$refs.popup.close();if(this.isWeixin&&this.isiOS&&4===t.type)this.$refs.toast.show({message:this.i18n.t("discuzq.post.IOSWxNotRecordAudio")});else if(5!==t.type)if(0===this.footerIndex&&(o="/topic/post?type=".concat(t.type,"&categoryId=").concat(this.getCategoryId,"&categoryIndex=").concat(this.getCategoryIndex)),3===t.type){if(!this.forums.other.can_upload_images)return void this.$refs.toast.show({message:this.i18n.t("home.NoPermissionToUploadPictures")});this.$nextTick((function(){n.$refs.upload.uploadClick()})),this.cancel()}else 2===t.type?(this.$nextTick((function(){n.$refs.uploadVideo.uploadVideo()})),e.$off("uploadVideoOver"),e.$on("uploadVideoOver",(function(a){o=0===n.footerIndex?"/topic/post?type=".concat(t.type,"&categoryId=").concat(n.getCategoryId,"&categoryIndex=").concat(n.getCategoryIndex):"/topic/post?type=".concat(t.type),e.navigateTo({url:o,success:function(e){e.eventChannel.emit("acceptDataFromOpenerPage",{data:a})}}),n.cancel()}))):(o=0===this.footerIndex?"/topic/post?type=".concat(t.type,"&categoryId=").concat(this.getCategoryId,"&categoryIndex=").concat(this.getCategoryIndex):"/topic/post?type=".concat(t.type),e.navigateTo({url:o}),this.cancel());else this.$refs.clickOpenQandA.open()},cancel:function(){this.$refs.popup.close()},close:function(){this.$refs.auth.close()},handleClickOk:function(){this.$refs.surePopup.close(),"0"===this.sureType?e.navigateTo({url:"/pages/modify/realname?id=".concat(this.user.id)}):"1"===this.sureType&&this.user&&""===this.user.mobile&&this.$refs.authPhone.open()},handleClickCancel:function(){this.$refs.surePopup.close()},closeDialog:function(){this.$refs.authPhone.close()}})};t.default=b}).call(this,o("543d")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/qui-footer/qui-footer-create-component',
    {
        'components/qui-footer/qui-footer-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("533e"))
        })
    },
    [['components/qui-footer/qui-footer-create-component']]
]);
